# Steam CS2 隐秘物品查询

查询给定 Steam ID 的用户 CS2 公开库存中，所有**可交易**的隐秘（Covert/红色）品质物品信息。

## 文件说明

| 文件        | 说明                                      |
| ----------- | ----------------------------------------- |
| `index.js`  | 主脚本 - 查询 CS2 库存并筛选隐秘品质物品  |
| `mailto.js` | 邮件通知脚本 - 当发现可交易物品时发送邮件 |

## 功能特点

- 获取所有可交易的 Covert（红色）品质物品
- 包括武器皮肤、刀具、手套等
- 可选择排除勋章/徽章（默认排除）
- 返回中文物品信息
- 支持邮件通知

## 注意事项

⚠️ 由于 Steam 的 10 天隐藏政策，**新获得的物品在 10 天内无法通过 API 获取**。本脚本只能获取已过隐藏期的可交易物品。

## index.js 参数

| 参数                   | 说明                                       | 必填 |
| ---------------------- | ------------------------------------------ | ---- |
| `steam_id`             | Steam 64 位 ID（17 位数字，以 765 开头）   | ✅   |
| `exclude_collectibles` | 排除勋章/徽章，只显示武器皮肤（默认 true） | ❌   |
| `debug_mode`           | 调试模式，显示原始物品数据                 | ❌   |

## mailto.js 参数

| 参数                  | 说明                     | 必填 |
| --------------------- | ------------------------ | ---- |
| `inventory_step_name` | 前一个库存查询步骤的名称 | ✅   |

## 返回数据

- `total_covert_items`: 红色物品总数
- `covert_items`: 物品详情列表
  - `name`: 完整物品名称
  - `weapon_name`: 武器名称
  - `skin_name`: 皮肤名称
  - `item_type`: 物品类型
  - `condition`: 磨损程度
  - `condition_abbrev`: 磨损缩写（FN/MW/FT/WW/BS）
  - `rarity`: 稀有度
  - `market_url`: Steam 市场链接
  - `icon_url`: 物品图标链接

## 前置要求

目标用户的 Steam 隐私设置必须为公开：

1. 个人资料：公开
2. 游戏详情：公开
3. 库存：公开

## 使用流程（Pipedream）

1. 添加定时触发器（如每天执行一次）GMT+0 8:00
2. 添加 `index.js` 作为第一步，填入 Steam ID
3. 添加 `mailto.js` 作为第二步，填入第一步的步骤名称
4. 当发现可交易的隐秘物品时，会自动发送邮件通知
